root: true
parser: '@typescript-eslint/parser'
parserOptions:
  project: ./tsconfig.tests.json
  ecmaVersion: 2021
ignorePatterns:
  - /src/index.ts
extends:
  - eslint:recommended
  - plugin:node/recommended
  - plugin:@typescript-eslint/eslint-recommended
  - plugin:@typescript-eslint/recommended
  - plugin:@typescript-eslint/recommended-requiring-type-checking
  - prettier
rules:
  # eslint
  eqeqeq: error
  func-style:
    - error
    - declaration
    - allowArrowFunctions: true
  no-await-in-loop: error
  no-constructor-return: error
  no-eval: error
  no-extra-boolean-cast: off
  no-implicit-coercion: error
  no-mixed-operators: error
  no-new-object: error
  no-new-wrappers: error
  no-underscore-dangle: error
  no-useless-rename: error
  no-useless-return: error
  one-var: [error, never]
  prefer-const: error
  prefer-exponentiation-operator: error
  prefer-numeric-literals: error
  prefer-object-spread: error
  prefer-promise-reject-errors: error
  prefer-regex-literals: error
  require-unicode-regexp: error
  # eslint-plugin-node
  node/no-unsupported-features/es-syntax: off
  node/no-missing-import: off
  node/no-unpublished-import: off
  node/prefer-global/process:
    - error
    - never
  node/prefer-global/url: error
  # @typescript-eslint
  '@typescript-eslint/array-type':
    - error
    - default: generic
  '@typescript-eslint/consistent-type-assertions':
    - error
    - assertionStyle: as
  '@typescript-eslint/consistent-type-definitions': [error, interface]
  '@typescript-eslint/explicit-function-return-type':
    - error
    - allowExpressions: true
  '@typescript-eslint/explicit-member-accessibility':
    - error
    - accessibility: no-public
  '@typescript-eslint/method-signature-style': error
  '@typescript-eslint/naming-convention': error
  '@typescript-eslint/no-confusing-void-expression': error
  '@typescript-eslint/no-namespace': off
  '@typescript-eslint/no-non-null-asserted-nullish-coalescing': error
  '@typescript-eslint/no-require-imports': error
  '@typescript-eslint/no-unnecessary-boolean-literal-compare': error
  '@typescript-eslint/no-unnecessary-condition': error
  '@typescript-eslint/noinferrable-types': off
  '@typescript-eslint/non-nullable-type-assertion-style': error
  '@typescript-eslint/prefer-namespace-keyword': error
  '@typescript-eslint/prefer-nullish-coalescing': error
  '@typescript-eslint/prefer-optional-chain': error
  '@typescript-eslint/prefer-readonly-parameter-types':
    - error
    # https://github.com/typescript-eslint/typescript-eslint/issues/1758
    - treatMethodsAsReadonly: true
  '@typescript-eslint/prefer-regexp-exec': error
  '@typescript-eslint/prefer-return-this-type': error
  '@typescript-eslint/promise-function-async': error
  '@typescript-eslint/require-array-sort-compare':
    - error
    - ignoreStringArrays: true
  '@typescript-eslint/strict-boolean-expressions':
    - error
    - allowString: false
      allowNumber: false
      allowNullableObject: false
  '@typescript-eslint/switch-exhaustiveness-check': error
  # @typescript-eslint extension rules
  '@typescript-eslint/dot-notation': error
  no-duplicate-imports: off
  '@typescript-eslint/no-duplicate-imports': error
  '@typescript-eslint/no-implied-eval': error
  '@typescript-eslint/no-invalid-this': error
  '@typescript-eslint/no-loop-func': error
  no-redeclare: off
  '@typescript-eslint/no-redeclare': error
  '@typescript-eslint/no-shadow': error
  '@typescript-eslint/no-throw-literal': error
  '@typescript-eslint/no-unused-expressions': error
  '@typescript-eslint/require-await': off
  '@typescript-eslint/restrict-template-expressions': off
  '@typescript-eslint/return-await': [error, always]
overrides:
  - files:
      - "./__tests__/*.ts"
    extends:
      - plugin:jest/recommended
      - plugin:jest/style
    rules:
      # @typescript-eslint
      '@typescript-eslint/naming-convention': off
      '@typescript-eslint/no-explicit-any': off
      '@typescript-eslint/no-non-null-assertion': off
      '@typescript-eslint/no-unsafe-assignment': off
      '@typescript-eslint/no-unsafe-call': off
      '@typescript-eslint/no-unsafe-member-access': off
      '@typescript-eslint/no-unsafe-return': off
      '@typescript-eslint/prefer-readonly-parameter-types': off
      '@typescript-eslint/unbound-method': off
      '@typescript-eslint/no-unused-vars':
        - error
        - ignoreRestSiblings: true
      # eslint-plugin-jest
      jest/no-test-return-statement: error
      jest/prefer-expect-resolves: error
      jest/require-to-throw-message: error
      jest/unbound-method: error
